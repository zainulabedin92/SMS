!function(e){"use strict";e(document).ready(function(){var t;!function(){let t=e("body");if(!t.hasClass("learnpress")||!t.hasClass("archive"))return;let s=function(t){return e.ajax({url:e("#lp-archive-courses").data("allCoursesUrl"),type:"POST",data:t,dataType:"html",beforeSend:function(){e("#thim-course-archive").addClass("loading")}}).fail(function(){e("#thim-course-archive").removeClass("loading")}).done(function(t){let s=e(e.parseHTML(t));e("#thim-course-archive").replaceWith(s.find("#thim-course-archive")),e(".learn-press-pagination").html(s.find(".learn-press-pagination").html()||""),e(".thim-course-top .course-index span").replaceWith(s.find(".thim-course-top .course-index span"))})},r={s:"",ref:"course",post_type:"lp_course",course_orderby:"newly-published",course_paged:1};e(document).on("change",".thim-course-order > select",function(){r.s=e(".courses-searching .course-search-filter").val(),r.course_orderby=e(this).val(),r.course_paged=1,s(r)});var a=0;e(document).on("click","#lp-archive-courses .learn-press-pagination a.page-numbers",function(i){i.preventDefault(),console.log("object");var o=e("body");if(o.hasClass("archive")&&o.hasClass("tax-course_category")&&"thim-body"===o.attr("id")){var c=new RegExp("term-([0-9]+)");e.each(document.getElementsByTagName("body")[0].classList,function(e,t){var s=c.exec(t);console.log(s),s&&null!=s[1]&&(a=s[1])})}e("html, body").animate({scrollTop:e(".site-content").offset().top-140},1e3);let l=parseInt(e(this).text()),n=l||1,u=[],h=[],p=e(".learn-press-pagination.navigation.pagination ul.page-numbers li span.page-numbers.current").text(),d=e(this).hasClass("next")&&e(this).hasClass("page-numbers"),f=e(this).hasClass("prev")&&e(this).hasClass("page-numbers");if(l||(d&&(n=parseInt(p)+1),f&&(n=parseInt(p)-1)),e("form.thim-course-filter").find("input.filtered").each(function(){switch(e(this).attr("name")){case"term_id":u.push(e(this).val());break;case"c_authors":h.push(e(this).val());break;case"sort_by":r.course_price_filter=e(this).val()}}),t.hasClass("category")&&e(".list-cate-filter").length<=0){let e=t.attr("class").match(/category\-\d+/gi)[0].split("-").pop();u.push(e)}0===u.length&&a&&u.push(a),r.course_cate_filter=u,r.course_instructor_filter=h,r.s=e(".courses-searching .course-search-filter").val(),r.course_orderby=e(".thim-course-order > select").val(),r.course_paged=n,s(r)}),e("form.thim-course-filter").on("submit",function(a){a.preventDefault();let i=e(this).serializeArray(),o=[],c=[];if(i.length){if(e("html, body").animate({scrollTop:e(".site-content").offset().top-140},1e3),e(this).find("input").each(function(){let t=e(this);t.removeClass("filtered"),t.is(":checked")&&t.addClass("filtered")}),e.each(i,function(e,t){switch(t.name){case"term_id":o.push(t.value);break;case"c_authors":c.push(t.value);break;case"sort_by":r.course_price_filter=t.value}}),t.hasClass("tax-course_category")&&e(".list-cate-filter").length<=0){let e=t.attr("class").match(/term\-\d+/gi)[0].split("-").pop();o.push(e)}r.course_cate_filter=o,r.course_instructor_filter=c,r.course_paged=1,s(r)}})}(),t=null,e(document).on("keydown","body:not(.course-filter-active) .course-search-filter",function(s){if(!s.ctrlKey){if(13===s.keyCode)return s.preventDefault(),!1;if(s.keyCode>=48&&s.keyCode<=90||8===s.keyCode||32===s.keyCode){var r=e(this),a=8===s.keyCode?r.val():r.val()+s.key,i=e("body");null!=t&&clearTimeout(t),t=setTimeout(function(){r.attr("disabled","disabled"),t=null,e("#thim-course-archive").addClass("loading");var s=r.parents("#lp-archive-courses"),o=[];if(i.hasClass("category")){var c=i.attr("class").match(/category\-\d+/gi)[0].split("-").pop();o.push(c)}e(".list-cate-filter").length>0&&e(".list-cate-filter input.filtered").each(function(){e(this).val()!==c&&o.push(e(this).val())}),e.ajax({url:e("#lp-archive-courses").data("allCoursesUrl"),type:"POST",dataType:"html",data:{s:a,ref:"course",post_type:"lp_course",course_orderby:e(".thim-course-order > select").val(),course_cate_filter:o,course_paged:1},success:function(t){var r=e(t).find("#lp-archive-courses").html();s.html(r),e(".course-search-filter").val(a).trigger("focus"),i.removeClass("course-filter-active"),e(".filter-loading").remove()},error:function(){i.removeClass("course-filter-active"),e(".filter-loading").remove()}})},1e3)}}})})}(jQuery);
